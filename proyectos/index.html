<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Pedidos - Restaurante</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            width: 100%;
            max-width: 1200px;
        }

        /* Login */
        .login-container {
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            max-width: 400px;
            margin: 0 auto;
        }

        .login-container h1 {
            color: #667eea;
            margin-bottom: 30px;
            text-align: center;
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 500;
        }

        .input-group input {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        .input-group input:focus {
            outline: none;
            border-color: #667eea;
        }

        .btn {
            width: 100%;
            padding: 14px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .btn:hover {
            transform: translateY(-2px);
        }

        .btn:active {
            transform: translateY(0);
        }

        /* Dashboard */
        .dashboard {
            display: none;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        .dashboard.active {
            display: block;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .user-info {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .user-info h2 {
            color: #667eea;
        }

        .user-info .stats {
            color: #666;
            font-size: 14px;
        }

        .logout-btn {
            padding: 10px 20px;
            background: #ff4757;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
        }

        .admin-actions {
            margin-top: 15px;
        }

        .ticket-btn {
            padding: 10px 20px;
            background: #2ecc71;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            margin-left: 10px;
        }

        .tables-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .table-card {
            background: #f8f9fa;
            padding: 30px 20px;
            border-radius: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            border: 3px solid transparent;
        }

        .table-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }

        .table-card.available {
            border-color: #2ecc71;
        }

        .table-card.occupied {
            border-color: #ff4757;
            background: #ffe0e3;
        }

        .table-number {
            font-size: 24px;
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
        }

        .table-status {
            font-size: 14px;
            font-weight: 600;
            padding: 5px 10px;
            border-radius: 20px;
            display: inline-block;
        }

        .status-available {
            background: #2ecc71;
            color: white;
        }

        .status-occupied {
            background: #ff4757;
            color: white;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            padding: 20px;
            overflow-y: auto;
        }

        .modal.active {
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 20px;
            max-width: 600px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-header h2 {
            color: #667eea;
        }

        .close-btn {
            font-size: 28px;
            cursor: pointer;
            color: #666;
            background: none;
            border: none;
        }

        .menu-category {
            margin-bottom: 20px;
        }

        .menu-category h3 {
            color: #333;
            margin-bottom: 10px;
            padding-bottom: 5px;
            border-bottom: 2px solid #667eea;
        }

        .menu-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            margin: 5px 0;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .menu-item-info {
            flex: 1;
        }

        .menu-item-name {
            font-weight: 600;
            color: #333;
        }

        .menu-item-price {
            color: #2ecc71;
            font-weight: bold;
        }

        .add-btn {
            padding: 8px 15px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
        }

        .order-summary {
            margin-top: 20px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .order-summary h3 {
            color: #333;
            margin-bottom: 15px;
        }

        .order-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 1px solid #e0e0e0;
        }

        .order-total {
            font-size: 18px;
            font-weight: bold;
            color: #667eea;
            margin-top: 15px;
            text-align: right;
        }

        .confirm-btn {
            width: 100%;
            padding: 14px;
            background: #2ecc71;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            margin-top: 15px;
        }

        /* Ticket */
        .ticket {
            background: white;
            padding: 20px;
            max-width: 300px;
            margin: 0 auto;
            font-family: 'Courier New', monospace;
            border: 2px dashed #333;
        }

        .ticket-header {
            text-align: center;
            margin-bottom: 20px;
            border-bottom: 2px dashed #333;
            padding-bottom: 10px;
        }

        .ticket-title {
            font-size: 20px;
            font-weight: bold;
        }

        .ticket-info {
            font-size: 12px;
            margin: 5px 0;
        }

        .ticket-items {
            margin: 20px 0;
        }

        .ticket-item {
            display: flex;
            justify-content: space-between;
            margin: 5px 0;
            font-size: 14px;
        }

        .ticket-footer {
            border-top: 2px dashed #333;
            padding-top: 10px;
            margin-top: 10px;
        }

        .ticket-total {
            display: flex;
            justify-content: space-between;
            font-weight: bold;
            font-size: 16px;
        }

        @media (max-width: 768px) {
            .tables-grid {
                grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
                gap: 15px;
            }

            .login-container {
                padding: 30px 20px;
            }

            .dashboard {
                padding: 20px;
            }

            .header {
                flex-direction: column;
                align-items: flex-start;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Login -->
        <div id="loginView" class="login-container">
            <h1>üçΩÔ∏è Sistema de Pedidos</h1>
            <div class="input-group">
                <label>Usuario</label>
                <input type="text" id="username" placeholder="Ingrese su usuario">
            </div>
            <div class="input-group">
                <label>Contrase√±a</label>
                <input type="password" id="password" placeholder="Ingrese su contrase√±a">
            </div>
            <button class="btn" onclick="login()">Iniciar Sesi√≥n</button>
            <p style="margin-top: 20px; text-align: center; color: #666; font-size: 14px;">
                Mesero: mesero / 1234<br>
                Admin: admin / admin
            </p>
        </div>

        <!-- Dashboard -->
        <div id="dashboardView" class="dashboard">
            <div class="header">
                <div class="user-info">
                    <h2 id="welcomeText">Bienvenido</h2>
                    <div class="stats">
                        <span id="timeDisplay"></span> | 
                        <span id="ordersCount">Pedidos hoy: 0</span>
                    </div>
                </div>
                <div>
                    <button class="logout-btn" onclick="logout()">Cerrar Sesi√≥n</button>
                    <div id="adminActions" class="admin-actions" style="display: none;">
                        <button class="ticket-btn" onclick="showTicketPreview()">Ver Ticket de Ejemplo</button>
                    </div>
                </div>
            </div>

            <h3 style="color: #333; margin-bottom: 15px;">Mesas del Restaurante</h3>
            <div id="tablesGrid" class="tables-grid"></div>
        </div>

        <!-- Modal de Pedido -->
        <div id="orderModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 id="modalTitle">Mesa #1</h2>
                    <button class="close-btn" onclick="closeModal()">&times;</button>
                </div>

                <div id="menuContent"></div>

                <div id="orderSummary" class="order-summary" style="display: none;">
                    <h3>Resumen del Pedido</h3>
                    <div id="orderItems"></div>
                    <div class="order-total" id="orderTotal">Total: $0</div>
                    <button class="confirm-btn" onclick="confirmOrder()">Confirmar Pedido</button>
                </div>
            </div>
        </div>

        <!-- Modal de Ticket -->
        <div id="ticketModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Vista Previa del Ticket</h2>
                    <button class="close-btn" onclick="closeTicketModal()">&times;</button>
                </div>
                <div id="ticketContent"></div>
            </div>
        </div>
    </div>

    <script>
        // Datos de usuarios
        const users = {
            'mesero': { password: '1234', role: 'waiter', name: 'Juan P√©rez' },
            'admin': { password: 'admin', role: 'admin', name: 'Administrador' }
        };

        // Datos del men√∫
        const menu = {
            'Entradas': [
                { name: 'Ensalada C√©sar', price: 8.99 },
                { name: 'Sopa del D√≠a', price: 6.50 },
                { name: 'Nachos con Queso', price: 9.99 }
            ],
            'Platos Principales': [
                { name: 'Hamburguesa Cl√°sica', price: 12.99 },
                { name: 'Pizza Margarita', price: 14.99 },
                { name: 'Pollo a la Parrilla', price: 16.50 },
                { name: 'Pasta Alfredo', price: 13.99 }
            ],
            'Bebidas': [
                { name: 'Refresco', price: 2.50 },
                { name: 'Jugo Natural', price: 3.50 },
                { name: 'Caf√©', price: 2.00 }
            ],
            'Postres': [
                { name: 'Helado', price: 4.50 },
                { name: 'Cheesecake', price: 5.99 },
                { name: 'Brownie', price: 4.99 }
            ]
        };

        // Estado de las mesas
        let tables = {};
        for (let i = 1; i <= 12; i++) {
            tables[i] = { occupied: false, order: [] };
        }

        let currentUser = null;
        let currentTable = null;
        let currentOrder = [];
        let ordersToday = 0;

        // Login
        function login() {
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;

            if (users[username] && users[username].password === password) {
                currentUser = { username, ...users[username] };
                showDashboard();
            } else {
                alert('Usuario o contrase√±a incorrectos');
            }
        }

        // Mostrar Dashboard
        function showDashboard() {
            document.getElementById('loginView').style.display = 'none';
            document.getElementById('dashboardView').classList.add('active');
            document.getElementById('welcomeText').textContent = `Hola, ${currentUser.name}`;
            
            if (currentUser.role === 'admin') {
                document.getElementById('adminActions').style.display = 'block';
            }

            updateTime();
            setInterval(updateTime, 1000);
            renderTables();
        }

        // Actualizar hora
        function updateTime() {
            const now = new Date();
            const timeStr = now.toLocaleTimeString('es-ES');
            document.getElementById('timeDisplay').textContent = timeStr;
        }

        // Renderizar mesas
        function renderTables() {
            const grid = document.getElementById('tablesGrid');
            grid.innerHTML = '';

            for (let i = 1; i <= 12; i++) {
                const table = tables[i];
                const card = document.createElement('div');
                card.className = `table-card ${table.occupied ? 'occupied' : 'available'}`;
                card.onclick = () => openTable(i);
                
                card.innerHTML = `
                    <div class="table-number">Mesa ${i}</div>
                    <span class="table-status ${table.occupied ? 'status-occupied' : 'status-available'}">
                        ${table.occupied ? 'Ocupada' : 'Disponible'}
                    </span>
                `;
                
                grid.appendChild(card);
            }
        }

        // Abrir mesa
        function openTable(tableNum) {
            currentTable = tableNum;
            currentOrder = [];
            document.getElementById('modalTitle').textContent = `Mesa #${tableNum}`;
            
            if (tables[tableNum].occupied) {
                showOrderDetails(tableNum);
            } else {
                showMenu();
            }
            
            document.getElementById('orderModal').classList.add('active');
        }

        // Mostrar men√∫
        function showMenu() {
            const menuContent = document.getElementById('menuContent');
            menuContent.innerHTML = '<h3 style="color: #333; margin-bottom: 15px;">Men√∫</h3>';
            
            for (const [category, items] of Object.entries(menu)) {
                const categoryDiv = document.createElement('div');
                categoryDiv.className = 'menu-category';
                categoryDiv.innerHTML = `<h3>${category}</h3>`;
                
                items.forEach((item, idx) => {
                    const itemDiv = document.createElement('div');
                    itemDiv.className = 'menu-item';
                    itemDiv.innerHTML = `
                        <div class="menu-item-info">
                            <div class="menu-item-name">${item.name}</div>
                            <div class="menu-item-price">$${item.price.toFixed(2)}</div>
                        </div>
                        <button class="add-btn" onclick="addItem('${category}', ${idx})">Agregar</button>
                    `;
                    categoryDiv.appendChild(itemDiv);
                });
                
                menuContent.appendChild(categoryDiv);
            }
        }

        // Agregar item al pedido
        function addItem(category, index) {
            const item = menu[category][index];
            currentOrder.push(item);
            updateOrderSummary();
        }

        // Actualizar resumen del pedido
        function updateOrderSummary() {
            const summary = document.getElementById('orderSummary');
            const items = document.getElementById('orderItems');
            
            if (currentOrder.length === 0) {
                summary.style.display = 'none';
                return;
            }
            
            summary.style.display = 'block';
            items.innerHTML = '';
            
            let total = 0;
            currentOrder.forEach((item, idx) => {
                const itemDiv = document.createElement('div');
                itemDiv.className = 'order-item';
                itemDiv.innerHTML = `
                    <span>${item.name}</span>
                    <span>$${item.price.toFixed(2)}</span>
                `;
                items.appendChild(itemDiv);
                total += item.price;
            });
            
            document.getElementById('orderTotal').textContent = `Total: $${total.toFixed(2)}`;
        }

        // Confirmar pedido
        function confirmOrder() {
            if (currentOrder.length === 0) {
                alert('El pedido est√° vac√≠o');
                return;
            }
            
            tables[currentTable].occupied = true;
            tables[currentTable].order = [...currentOrder];
            ordersToday++;
            document.getElementById('ordersCount').textContent = `Pedidos hoy: ${ordersToday}`;
            
            alert('Pedido confirmado exitosamente');
            closeModal();
            renderTables();
        }

        // Mostrar detalles del pedido
        function showOrderDetails(tableNum) {
            const menuContent = document.getElementById('menuContent');
            const order = tables[tableNum].order;
            
            menuContent.innerHTML = '<h3 style="color: #333; margin-bottom: 15px;">Detalles del Pedido</h3>';
            
            let total = 0;
            order.forEach(item => {
                const itemDiv = document.createElement('div');
                itemDiv.className = 'menu-item';
                itemDiv.innerHTML = `
                    <div class="menu-item-info">
                        <div class="menu-item-name">${item.name}</div>
                        <div class="menu-item-price">$${item.price.toFixed(2)}</div>
                    </div>
                `;
                menuContent.appendChild(itemDiv);
                total += item.price;
            });
            
            const totalDiv = document.createElement('div');
            totalDiv.style.cssText = 'margin-top: 20px; font-size: 18px; font-weight: bold; text-align: right; color: #667eea;';
            totalDiv.textContent = `Total: $${total.toFixed(2)}`;
            menuContent.appendChild(totalDiv);
            
            const closeBtn = document.createElement('button');
            closeBtn.className = 'confirm-btn';
            closeBtn.textContent = 'Cerrar Mesa';
            closeBtn.style.background = '#ff4757';
            closeBtn.onclick = () => {
                tables[tableNum].occupied = false;
                tables[tableNum].order = [];
                closeModal();
                renderTables();
            };
            menuContent.appendChild(closeBtn);
        }

        // Cerrar modal
        function closeModal() {
            document.getElementById('orderModal').classList.remove('active');
            currentOrder = [];
            currentTable = null;
        }

        // Mostrar ticket de ejemplo
        function showTicketPreview() {
            const ticketContent = document.getElementById('ticketContent');
            const now = new Date();
            
            ticketContent.innerHTML = `
                <div class="ticket">
                    <div class="ticket-header">
                        <div class="ticket-title">RESTAURANTE LA MESA</div>
                        <div class="ticket-info">Calle Principal #123</div>
                        <div class="ticket-info">Tel: (123) 456-7890</div>
                        <div class="ticket-info">Fecha: ${now.toLocaleDateString('es-ES')}</div>
                        <div class="ticket-info">Hora: ${now.toLocaleTimeString('es-ES')}</div>
                    </div>
                    
                    <div class="ticket-info" style="margin-bottom: 10px;">
                        <strong>Mesa:</strong> 5<br>
                        <strong>Mesero:</strong> ${currentUser.name}
                    </div>
                    
                    <div class="ticket-items">
                        <div class="ticket-item">
                            <span>Hamburguesa Cl√°sica</span>
                            <span>$12.99</span>
                        </div>
                        <div class="ticket-item">
                            <span>Refresco</span>
                            <span>$2.50</span>
                        </div>
                        <div class="ticket-item">
                            <span>Helado</span>
                            <span>$4.50</span>
                        </div>
                    </div>
                    
                    <div class="ticket-footer">
                        <div class="ticket-info">Subtotal: $19.99</div>
                        <div class="ticket-info">IVA (10%): $2.00</div>
                        <div class="ticket-total">
                            <span>TOTAL:</span>
                            <span>$21.99</span>
                        </div>
                    </div>
                    
                    <div style="text-align: center; margin-top: 20px; font-size: 12px;">
                        ¬°Gracias por su visita!<br>
                        Vuelva pronto
                    </div>
                </div>
            `;
            
            document.getElementById('ticketModal').classList.add('active');
        }

        // Cerrar modal de ticket
        function closeTicketModal() {
            document.getElementById('ticketModal').classList.remove('active');
        }

        // Cerrar sesi√≥n
        function logout() {
            currentUser = null;
            document.getElementById('dashboardView').classList.remove('active');
            document.getElementById('loginView').style.display = 'block';
            document.getElementById('username').value = '';
            document.getElementById('password').value = '';
            ordersToday = 0;
        }
    </script>
</body>
</html>